require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("rsvp");c.configure("onerror",function(a){console.error(a.message),console.error(a.stack)}),b.exports={repositories:a("./lib/repositories"),ORM:a("./lib/orm"),decorators:a("./lib/decorators"),utils:a("./lib/utils")}},{"./lib/decorators":3,"./lib/orm":6,"./lib/repositories":11,"./lib/utils":24,rsvp:"rsvp"}],2:[function(a,b){var c=a("underscore"),d={unknownProperty:function(a){return this.get(a)},get:function(a){var b=this.getSchema().getProperty(a);return void 0!==b?this._super(a):void 0!==this[a]?this[a]:void 0},setUnknownProperty:function(a,b){return this.set(a,b)},set:function(a,b){var d=this;if(c.isObject(a))return c.each(a,function(a,b){d.set(b,a)}),this;var e=this.getSchema().getProperty(a);return Ember.propertyWillChange(this,a),void 0!==e&&this._super(a,b),void 0!==this[a]&&(this[a]=b),Ember.propertyDidChange(this,a),this},reload:function(){var a=this.getData(),b=this;return this._super().then(function(d){var e=d.getData(),f=[];c.each(e,function(b,c){a[c]!==b&&f.push(c)}),c.each(f,function(a){Ember.propertyWillChange(b,a),Ember.propertyDidChange(b,a)})})}};b.exports=d},{underscore:"underscore"}],3:[function(a,b){b.exports={Ember:a("./ember")}},{"./ember":2}],4:[function(a,b){var c=a("./../utils"),d=a("rsvp"),e=a("underscore"),f=c.Class.extend({_model:null,_repository:null,_logger:null,_instanceId:null,_originalData:null,_data:null,_events:null,_extensions:null,_isNew:!0,_isDeleted:!1,_isSetup:!1,init:function(){throw new c.Exceptions.AbstractClassException},on:function(a,b){c.assert("Callback must be a function!",e.isFunction(b)),this._checkDeleted(),void 0===this._events[a]&&(this._events[a]=[]),this._events[a].push(b)},trigger:function(a,b){var c=this;this._checkDeleted(),void 0!==this._events[a]&&e.each(this._events[a],function(a){a.call(c,b)}),void 0!==this._orm.getEventHandlers(a)&&e.each(this._orm.getEventHandlers(a),function(a){a.call(c,b)})},get:function(a){return this._checkDeleted(),this._data[a]},set:function(a,b){this._checkDeleted();var c,d=this;return e.isObject(a)?e.each(a,function(a,b){c=d._data[b],d._data[b]=a,d.trigger("change",{key:b,from:c,to:a})}):(c=d._data[a],this._data[a]=b,d.trigger("change",{key:a,from:c,to:b})),this},save:function(){this._checkDeleted();var a=this,b={create:a._isNew,changed:a.getFieldsPendingChange()};return this.trigger("save",b),new d.Promise(function(c,d){var e;if(a._isNew)e=a._repository.create(a._model,a._model.translateObjectToRepository(a._data));else{if(0===a.getFieldsPendingChange().length)return a.trigger("saved",b),c(a);e=a._repository.save(a._model,a._model.translateObjectToRepository(a._originalData),a._model.translateObjectToRepository(a._data))}e.then(function(d){return a._parseData(a._model.translateObjectToOrm(d)),a.trigger("saved",b),c(a)},d)})},"delete":function(){this._checkDeleted();var a=this;return a.trigger("delete"),new d.Promise(function(b,c){a._repository["delete"](a._model,a._data).then(function(){return a.trigger("deleted"),a._isDeleted=!0,b(a)},c)})},reload:function(){if(this._checkDeleted(),this._isNew)throw new c.Exceptions.UnsavedModelException("Cannot reload a model that has not been saved!");var a=this;return a.trigger("reload"),new d.Promise(function(b,c){a._repository.reload(a._model,a._model.translateObjectToRepository(a._data)).then(function(c){return a._parseData(a._model.translateObjectToOrm(c)),a.trigger("reloaded"),b(a)},c)})},getData:function(){return e.extend({},this._data)},getPrimaryKey:function(){return this._model.getPrimaryKey()},getModelName:function(){return this._model.getName()},getSchema:function(){return this._model},getFieldsPendingChange:function(){var a=[],b=this;return e.each(this._data,function(c,d){b._originalData[d]!==c&&a.push(d)}),a},setup:function(a,b,d){if(this._isSetup)throw new c.Exceptions.ModelInstantiationException("Cannot call setup() on a model that has already been setup!");var f=this;this._originalData={},this._data={},this._events={},this._conditions=[],this._isSetup=!0,this._instanceId=a,e.each(this._model.getProperties(),function(a){f._originalData[a.getName()]=null,f._data[a.getName()]=null}),this._parseData(b,d)},getClass:function(){return this._orm.getClass(this._model.getName())},_checkDeleted:function(){if(this._isDeleted)throw new c.Exceptions.DeletedModelException},_parseData:function(a,b){var c=this;void 0===b&&(b=!1),c._isNew=b,a&&e.each(a,function(a,b){var d=c._model.getProperty(b);void 0!==d&&(c._originalData[d.getName()]=a,c._data[d.getName()]=a)})}});b.exports=f},{"./../utils":24,rsvp:"rsvp",underscore:"underscore"}],5:[function(a,b){var c=a("./../utils"),d=a("rsvp"),e=a("underscore"),f=a("./where"),g=c.Class.extend({_model:null,_modelName:null,_modelSchema:null,_repository:null,_logger:null,_conditions:null,_findOptions:null,_orm:null,init:function(a,b){c.assert("`orm` is a required field!",void 0!==a),c.assert("`modelName` is a required field!",void 0!==b),this._model=a._models[b],this._modelName=b,this._modelSchema=a.getSchema().getModel(b),this._repository=a._repository,this._logger=a._logger,this._orm=a,this._conditions=[],this._findOptions={}},where:function(a){return new f(this,this._modelSchema.getProperty(a))},limit:function(a){return this._findOptions.limit=a,this},offset:function(a){return this._findOptions.offset=a,this},orderBy:function(a,b){return b=b||"ascending",this._findOptions.orderBy=this._modelSchema.getProperty(a).getOriginalName(),this._findOptions.direction=b,this},create:function(a){return c.instantiateModel(this._orm,this._model,a,!0)},find:function(a){var b=this;return new d.Promise(function(d,f){void 0!==a&&(e.isObject(a)?e.each(a,function(a,c){b.where(c).isEqual(a)}):b.where(b._modelSchema.getPrimaryKey()[0].getName()).isEqual(a)),b.limit(1),b._repository.find(b._modelSchema,b._findOptions,b._conditions).then(function(a){if(0===a.length)return d(null);var e=c.instantiateModel(b._orm,b._model,b._modelSchema.translateObjectToOrm(a[0]));return d(e)},f)})},findAll:function(){var a=this;return new d.Promise(function(b,d){var f=a._repository.find(a._modelSchema,a._findOptions,a._conditions);f.then(function(f){var g=[];return e.each(f,function(b){try{var e=c.instantiateModel(a._orm,a._model,a._modelSchema.translateObjectToOrm(b));g.push(e)}catch(f){d(f)}}),b(g)},d)})},getClass:function(){return this._model}});b.exports=g},{"./../utils":24,"./where":8,rsvp:"rsvp",underscore:"underscore"}],6:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./orm"),f=(a("../repositories"),{});f.create=function(a,b){return new c.Promise(function(c,d){var f=new e(a,b);f.ready().then(c,d)})},f.ready=function(a){return new c.Promise(function(b,e){var f=[];d.each(a,function(a){f.push(a)}),c.all(f).then(function(){b(a)},e)})},b.exports=f},{"../repositories":11,"./orm":7,rsvp:"rsvp",underscore:"underscore"}],7:[function(a,b){function c(a){a._readyPromise=new e.Promise(function(b,c){a._repository.getSchema().then(function(c){a._schema=c,f.each(c.getModels(),function(b){a._models[b.getName()]=d(a,b)}),b(a)},c)})}function d(a,b){return h.extend({_orm:a,_repository:a._repository,_model:b,_logger:a._logger,init:function(a,b){this.setup(j,a,b),this.trigger("init"),j++}})}var e=a("rsvp"),f=a("underscore"),g=a("./../utils"),h=a("./basemodel"),i=a("./factory"),j=0,k=g.Class.extend({_repository:null,_decorations:null,_logger:null,_classes:null,_schema:null,_readyPromise:null,_globalEvents:null,init:function(a,b){g.assert("You must supply a repository to use the ORM!",void 0!==a),this._repository=a,this._logger=b||console,this._models={},this._decorations=[],this._globalEvents={},c(this)},ready:function(){return this._readyPromise},factory:function(a){return g.assert("Could not find the model `"+a+"`!",void 0!==this._models[a]),new i(this,a)},extend:function(a,b){var c=this._models[a];this._models[a]=c.extend(b)},decorate:function(a){this._decorations.push(a)},getDecorations:function(){return this._decorations},getSchema:function(){return this._schema},getRepository:function(){return this._repository},getClass:function(a){return this._models[a]},registerGlobalEvent:function(a,b){g.assert("Callback must be a function!",f.isFunction(b)),void 0===this._globalEvents[a]&&(this._globalEvents[a]=[]),this._globalEvents[a].push(b)},getEventHandlers:function(a){return this._globalEvents[a]}});b.exports=k},{"./../utils":24,"./basemodel":4,"./factory":5,rsvp:"rsvp",underscore:"underscore"}],8:[function(a,b){var c=a("./../utils"),d=(a("rsvp"),a("underscore"),c.Class.extend({_factory:null,_field:null,_repository:null,init:function(a,b){c.assert("Factory must be provided!",void 0!==a),c.assert("Property must be provided!",void 0!==b),this._factory=a,this._field=b.getOriginalName(),this._repository=this._factory._repository},isEqual:function(a){return this._factory._conditions.push(new this._repository.where.isEqual(this._field,a)),this._factory},isNotEqual:function(a){return this._factory._conditions.push(new this._repository.where.isNotEqual(this._field,a)),this._factory},isBetween:function(a,b){return this._factory._conditions.push(new this._repository.where.isBetween(this._field,[a,b])),this._factory},isGreaterThan:function(a){return this._factory._conditions.push(new this._repository.where.isGreaterThan(this._field,a)),this._factory},isGreaterThanOrEqual:function(a){return this._factory._conditions.push(new this._repository.where.isGreaterThanOrEqual(this._field,a)),this._factory},isLessThan:function(a){return this._factory._conditions.push(new this._repository.where.isLessThan(this._field,a)),this._factory},isLessThanOrEqual:function(a){return this._factory._conditions.push(new this._repository.where.isLessThanOrEqual(this._field,a)),this._factory},isNull:function(){return this._factory._conditions.push(new this._repository.where.isNull(this._field)),this._factory},isNotNull:function(){return this._factory._conditions.push(new this._repository.where.isNotNull(this._field)),this._factory}}));b.exports=d},{"./../utils":24,rsvp:"rsvp",underscore:"underscore"}],9:[function(a,b){var c=a("rsvp"),d=a("./../../utils"),e=a("underscore"),f=d.Class.extend({_options:null,_logger:null,where:null,init:function(){throw new d.Exceptions.AbstractClassException},getSchema:function(){},find:function(){},create:function(){},save:function(){},"delete":function(){},reload:function(a,b){var d=this;return new c.Promise(function(c,f){var g=[];e.each(a.getPrimaryKey(),function(a){g.push(new d.where.isEqual(a.getOriginalName(),b[a.getOriginalName()]))}),d.find(a,{limit:1},g).then(function(a){return c(a[0])},f)})},_validateFields:function(a,b){e.each(a.getProperties(),function(a){if(a.isRequired()&&(!e.has(b,a.getOriginalName())||null===b[a.getOriginalName()]))throw new d.Exceptions.ValidationException("Object missing required field `"+a.getName()+"`!")})}});b.exports=f},{"./../../utils":24,rsvp:"rsvp",underscore:"underscore"}],10:[function(a,b){var c=a("./../../utils"),d=c.Class.extend({field:null,value:null,init:function(){throw new c.Exceptions.AbstractClassException}});b.exports={isEqual:d.extend(),isNotEqual:d.extend(),isBetween:d.extend(),isGreaterThan:d.extend(),isGreaterThanOrEqual:d.extend(),isLessThan:d.extend(),isLessThanOrEqual:d.extend(),isNull:d.extend(),isNotNull:d.extend()}},{"./../../utils":24}],11:[function(a,b){b.exports={"abstract":a("./abstract/repository"),mysql:a("./mysql"),rest:a("./rest")}},{"./abstract/repository":9,"./mysql":25,"./rest":15}],12:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./../../../utils"),f=a("./response"),g=e.Class.extend({logger:null,baseUrl:null,init:function(a,b){e.assert("`options` must be an object!",d.isObject(a)),e.assert("Options must have a baseUrl string!",d.isString(a.baseUrl)),this.baseUrl=a.baseUrl,this.logger=b||console},get:function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){jQuery.ajax({url:d.baseUrl+a,type:"GET",headers:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){e(c)})})},post:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,g){jQuery.ajax({url:e.baseUrl+a,type:"POST",headers:d,data:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){g(c)})})},put:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,g){jQuery.ajax({url:e.baseUrl+a,type:"PUT",headers:d,data:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){g(c)})})},"delete":function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){jQuery.ajax({url:d.baseUrl+a,type:"DELETE",headers:b}).then(function(a,b,d){c(new f(null,d.status,this.logger))},function(a,b,c){e(c)})})}});b.exports=g},{"./../../../utils":24,"./response":14,rsvp:"rsvp",underscore:"underscore"}],13:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./../../../utils"),f=a("request"),g=a("./response"),h=e.Class.extend({logger:null,baseUrl:null,init:function(a,b){e.assert("`options` must be an object!",d.isObject(a)),e.assert("Options must have a baseUrl string!",d.isString(a.baseUrl)),this.baseUrl=a.baseUrl,this.logger=b||console},get:function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){f({url:d.baseUrl+a,headers:b,method:"GET"},function(a,b,d){a&&e(a),c(new g(JSON.parse(d),b.statusCode,this.logger))})})},post:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,h){f({url:e.baseUrl+a,headers:d,method:"POST",json:b},function(a,b,d){a&&h(a),c(new g(d,b.statusCode,this.logger))})})},put:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,h){f({url:e.baseUrl+a,headers:d,method:"PUT",json:b},function(a,b,d){a&&h(a),c(new g(d,b.statusCode,this.logger))})})},"delete":function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){f({url:d.baseUrl+a,headers:b,method:"DELETE"},function(a,b,d){a&&e(a),c(new g(d,b.statusCode,this.logger))})})}});b.exports=h},{"./../../../utils":24,"./response":14,request:25,rsvp:"rsvp",underscore:"underscore"}],14:[function(a,b){var c=a("./../../../utils"),d=c.Class.extend({data:null,statusCode:null,logger:null,init:function(a,b,d){c.assert("`data` is a required field!",void 0!==a),c.assert("`statusCode` is a required field!",void 0!==b),this.data=a,this.statusCode=b,this.logger=d||console}});b.exports=d},{"./../../../utils":24}],15:[function(a,b){function c(a){var b={from:null,where:null,limit:null,offset:null,orderBy:null,direction:null},c=e.extend({},b,a),f=d(c.where);return c.orderBy&&(f+="&_order="+c.orderBy,c.direction&&(f+=":"+c.direction)),c.limit&&(f+="&_limit="+c.limit),c.offset&&(f+="&_offset="+c.offset),0===f.length?"":"?"+f}function d(a){var b=[];return void 0===a||0===a.length?"":(e.each(a,function(a){b.push(a.toQuery())}),b.join("&"))}var e=a("underscore"),f=a("rsvp"),g=a("./../abstract/repository"),h=a("./../../utils"),i=a("./../../schema"),j=g.extend({where:null,_schemaPromise:null,_driver:null,init:function(b,c){h.assert("A driver must be provided!",void 0!==b),this._logger=c||console,this._driver=b,this.where=a("./where")},getSchema:function(){var a=this;return this._schemaPromise?this._schemaPromise:(this._schemaPromise=new f.Promise(function(b,c){a._driver.get("/schema").then(function(a){var c=new i.Schema;e.each(a.data,function(a){var b=new i.Model(a.name);e.each(a.properties,function(a){var c=new i.Property(a.name,a.type);a.primaryKey&&c.makePrimaryKey(),a.required&&c.makeRequired(),b.addProperty(c)}),c.addModel(b)}),b(c)},c)}),this._schemaPromise)},find:function(a,b,d){var g=this;return b=b||{},new f.Promise(function(f,h){var i="/api/"+a.getOriginalName(),j=null;if(e.each(d,function(b){a.getProperty(b.field).isPrimaryKey()&&b instanceof g.where.isEqual&&(j=b.value)}),null!==j)i+="/"+j,g._driver.get(i).then(function(a){return f(200!==a.statusCode?[]:[a.data])},h);else{var k={limit:null,offset:null,orderBy:null,direction:null,from:a.getOriginalName(),where:d};i+=c(e.extend({},k,b)),g._driver.get(i).then(function(b){return 200!==b.statusCode?f([]):void f(b.data._embedded[a.getOriginalName()])},h)}})},create:function(a,b){var c=this;return new f.Promise(function(d,f){c._validateFields(a,b);var g=e.keys(b),h={},i="/api/"+a.getOriginalName();e.each(g,function(c){a.getProperty(c)&&(h[a.getProperty(c).getOriginalName()]=b[c])}),c._driver.post(i,h).then(function(g){var h=[];e.each(a.getPrimaryKey(),function(a){h.push("id"===a.getOriginalName()&&e.isEmpty(b[a.getOriginalName()])?new c.where.isEqual(a.getOriginalName(),g.data.id):new c.where.isEqual(a.getOriginalName(),b[a.getOriginalName()]))}),c.find(a,{},h).then(function(a){return d(a[0])},f)},f)})},save:function(a,b,c){var d=this;return new f.Promise(function(f,g){var h=e.keys(c),i={},j="/api/"+a.getOriginalName()+"/",k=null,l=[];e.each(a.getPrimaryKey(),function(a){k=b[a.getOriginalName()],l.push(new d.where.isEqual(a.getOriginalName(),c[a.getOriginalName()]))}),j+=k,e.each(h,function(b){a.getProperty(b)&&(i[a.getProperty(b).getOriginalName()]=c[b])}),d._driver.put(j,i).then(function(){d.find(a,{limit:1},l).then(function(a){return f(a[0])},g)},g)})},"delete":function(a,b){var c=this;return new f.Promise(function(d,f){var g="/api/"+a.getOriginalName();e.each(a.getPrimaryKey(),function(a){g+="/"+b[a.getOriginalName()]}),c._driver["delete"](g).then(function(a){d(a.data)},f)})}});j.Drivers={jQuery:a("./driver/jquery"),Node:a("./driver/node"),Mock:a("./driver/mock")},b.exports=j},{"./../../schema":18,"./../../utils":24,"./../abstract/repository":9,"./driver/jquery":12,"./driver/mock":void 0,"./driver/node":13,"./where":16,rsvp:"rsvp",underscore:"underscore"}],16:[function(a,b){var c=a("./../abstract/where"),d=a("./../../utils"),e=a("underscore"),f={};f.isEqual=c.isEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"="+this.value}}),f.isNotEqual=c.isNotEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<>"+this.value}}),f.isBetween=c.isBetween.extend({init:function(a,b){this.field=a,this.value=b,d.assert("Value must be an array with only two items",e.isArray(b)&&2===b.length)},toQuery:function(){return this.field+"="+this.value[0]+"|"+this.value[1]}}),f.isGreaterThan=c.isGreaterThan.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=>"+this.value}}),f.isGreaterThanOrEqual=c.isGreaterThanOrEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=>="+this.value}}),f.isLessThan=c.isLessThan.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<"+this.value}}),f.isLessThanOrEqual=c.isLessThanOrEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<="+this.value}}),f.isNull=c.isNull.extend({init:function(a){this.field=a},toQuery:function(){return this.field+"=:NULL:"}}),f.isNotNull=c.isNotNull.extend({init:function(a){this.field=a},toQuery:function(){return this.field+"=<>:NULL:"}}),b.exports=f},{"./../../utils":24,"./../abstract/where":10,underscore:"underscore"}],17:[function(a,b){{var c=a("./../utils");a("underscore")}b.exports=c.Class.extend({_name:null,_originalName:null,init:function(){throw new c.Exceptions.AbstractClassException},getName:function(){return this._name},getOriginalName:function(){return this._originalName}})},{"./../utils":24,underscore:"underscore"}],18:[function(a,b){b.exports={Abstract:a("./abstract"),Schema:a("./schema"),Model:a("./model"),Property:a("./property")}},{"./abstract":17,"./model":19,"./property":20,"./schema":21}],19:[function(a,b){var c=a("./../utils"),d=a("underscore"),e=a("./abstract"),f=a("./property"),g=a("inflection");b.exports=e.extend({_properties:null,init:function(a,b){this._setName(a),this._metadata=b||{},this._properties={}},addProperty:function(a){return c.assert("`property` must be an instance of Schema.Property",a instanceof f),c.assert("Property must not already be defined in the model",void 0===this._properties[a.getName()]),this._properties[a.getName()]=a,this},getProperty:function(a){return this._properties[c.normalizeName(a,!1)]},getProperties:function(){return this._properties},getPrimaryKey:function(){var a=[];for(var b in this._properties)this._properties[b].isPrimaryKey()&&a.push(this._properties[b]);return a},getPropertyNames:function(){var a=[];for(var b in this._properties)a.push(this._properties[b].getName());return a},getPluralizedName:function(){var a=g.underscore(this.getName()).split("_");return 1===a.length?a[0]=g.pluralize(a[0]):a[a.length-1]=g.pluralize(a[a.length-1]),g.camelize(a.join("_"),!0)},getPOJO:function(){var a={name:this.getName(),properties:{}};return d.each(this.getProperties(),function(b){a.properties[b.getName()]=b.getPOJO()}),a},translateObjectToOrm:function(a){var b={},c=this;return d.each(a,function(a,d){var e=c.getProperty(d);void 0!==e&&(b[e.getName()]=a)}),b},translateObjectToRepository:function(a){var b={},c=this;return d.each(a,function(a,d){var e=c.getProperty(d);void 0!==e&&(b[e.getOriginalName()]=a)}),b},_setName:function(a){c.assert("`name` is a required field!",void 0!==a),c.assert("`name` must be a string!",d.isString(a)),this._name=c.normalizeName(a),this._originalName=a}})},{"./../utils":24,"./abstract":17,"./property":20,inflection:26,underscore:"underscore"}],20:[function(a,b){var c=a("./../utils"),d=a("./abstract"),e=a("underscore");b.exports=d.extend({_primaryKey:!1,_required:!1,_type:"String",_metadata:null,init:function(a,b,c){this._setName(a),this._type=b||this._type,this._metadata=c||{}},makePrimaryKey:function(){this._primaryKey=!0},isPrimaryKey:function(){return this._primaryKey},makeRequired:function(){this._required=!0},isRequired:function(){return this._required},getType:function(){return this._type},getPOJO:function(){return{name:this.getName(),type:this.getType(),primaryKey:this.isPrimaryKey(),required:this.isRequired()}},getMetadata:function(){return this._metadata},_setName:function(a){c.assert("`name` is a required field!",void 0!==a),c.assert("`name` must be a string!",e.isString(a)),this._name=c.normalizeName(a,!1),this._originalName=a}})},{"./../utils":24,"./abstract":17,underscore:"underscore"}],21:[function(a,b){var c=a("./../utils"),d=a("underscore"),e=a("./model");b.exports=c.Class.extend({_models:null,init:function(){this._models={}},addModel:function(a){return c.assert("`model` must be an instance of Schema.Model",a instanceof e),c.assert("Model must not already be defined in the schema",void 0===this._models[a.getName()]),this._models[a.getName()]=a,this},getModel:function(a){return this._models[c.normalizeName(a)]},getModels:function(){return this._models},getModelNames:function(){var a=[];return d.each(this._models,function(b){a.push(b.getName())}),a},getPOJO:function(){var a={};return d.each(this.getModels(),function(b){a[b.getName()]=b.getPOJO()}),a}})},{"./../utils":24,"./model":19,underscore:"underscore"}],22:[function(a,b,c){var d=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(a){var b=this.prototype;d=!0;var c=new this;d=!1;for(var f in a)c[f]="function"==typeof a[f]&&"function"==typeof b[f]&&e.test(a[f])?function(a,c){return function(){var d=this._super;this._super=b[a];var e=c.apply(this,arguments);return this._super=d,e}}(f,a[f]):a[f];return Class=function(){!d&&this.init&&this.init.apply(this,arguments)},Class.prototype=c,Class.constructor=Class,Class.extend=arguments.callee,Class},"undefined"!=typeof c&&(c.Class=Class)},{}],23:[function(a,b){function c(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}var d=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"An assertion made did not pass!"};c(d,Error),d.prototype.name="AssertionException";var e=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Object did not pass validation!"};c(e,Error),e.prototype.name="ValidationException";var f=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"This class is abstract and cannot be instantiated!"};c(f,Error),f.prototype.name="AbstractClassException";var g=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Deleted object access is not allowed!"};c(g,Error),g.prototype.name="DeletedModelException";var h=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Model must be saved first!"};c(h,Error),h.prototype.name="UnsavedModelException";var i=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"There was an error instantiating your model!"};c(i,Error),i.prototype.name="ModelInstantiationException";var j=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"There was an error in the repository!"};c(j,Error),j.prototype.name="RepositoryException",b.exports={AssertionException:d,ValidationException:e,AbstractClassException:f,DeletedModelException:g,UnsavedModelException:h,ModelInstantiationException:i,RepositoryException:j}},{}],24:[function(a,b){var c={},d=a("./exceptions"),e=a("inflection"),f=a("underscore");b.exports=c,c.assert=function(a,b){if(b!==!0)throw new d.AssertionException(a)},c.Class=a("./class").Class,c.Exceptions=d,c.curry=function(a,b){for(var c=[],d=2,e=arguments.length;e>d;d++)c.push(arguments[d]);return function(){for(var d=c.slice(0),e=0,f=arguments.length;f>e;e++)d.push(arguments[e]);return a.apply(b,d)}},c.normalizeName=function(a,b){void 0===b&&(b=!0),c.assert("Name must be a string",f.isString(a));var d,g,h=a.replace(/(\s|\_)+/g," ").trim().split(" ");return b&&(1===h.length?h[0]=e.singularize(h[0]):(g=h.pop(),h.push(e.singularize(g)))),d=h.join("_"),e.camelize(e.underscore(d),!0)},c.overrideMethod=function(a,b,d){var e=a[b]||c.noop,f=function(){var b,c=a._super;return a._super=e,b=d.apply(a,arguments),a._super=c,b};a[b]=f},c.decorateObject=function(a,b){return f.each(b,function(b){f.each(b,function(b,d){c.assert("Decorator method must be a function!",f.isFunction(b)),c.overrideMethod(a,d,b)})}),a},c.instantiateModel=function(a,b,d,e){var f=new b(d,e),g=a.getDecorations();return c.decorateObject(f,g),f},c.noop=function(){}},{"./class":22,"./exceptions":23,inflection:26,underscore:"underscore"}],25:[function(){},{}],26:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.inflection=d()}(this,function(){var a=["accommodation","adulthood","advertising","advice","aggression","aid","air","aircraft","alcohol","anger","applause","arithmetic","assistance","athletics","bacon","baggage","beef","biology","blood","botany","bread","butter","carbon","cardboard","cash","chalk","chaos","chess","crossroads","countryside","dancing","deer","dignity","dirt","dust","economics","education","electricity","engineering","enjoyment","envy","equipment","ethics","evidence","evolution","fame","fiction","flour","flu","food","fuel","fun","furniture","gallows","garbage","garlic","genetics","gold","golf","gossip","grammar","gratitude","grief","guilt","gymnastics","happiness","hardware","harm","hate","hatred","health","heat","help","homework","honesty","honey","hospitality","housework","humour","hunger","hydrogen","ice","importance","inflation","information","innocence","iron","irony","jam","jewelry","judo","karate","knowledge","lack","laughter","lava","leather","leisure","lightning","linguine","linguini","linguistics","literature","litter","livestock","logic","loneliness","luck","luggage","macaroni","machinery","magic","management","mankind","marble","mathematics","mayonnaise","measles","methane","milk","money","mud","music","mumps","nature","news","nitrogen","nonsense","nurture","nutrition","obedience","obesity","oxygen","pasta","patience","physics","poetry","pollution","poverty","pride","psychology","publicity","punctuation","quartz","racism","relaxation","reliability","research","respect","revenge","rice","rubbish","rum","safety","scenery","seafood","seaside","series","shame","sheep","shopping","sleep","smoke","smoking","snow","soap","software","soil","spaghetti","species","steam","stuff","stupidity","sunshine","symmetry","tennis","thirst","thunder","timber","traffic","transportation","trust","underwear","unemployment","unity","validity","veal","vegetation","vegetarianism","vengeance","violence","vitality","warmth","wealth","weather","welfare","wheat","wildlife","wisdom","yoga","zinc","zoology"],b={plural:{men:new RegExp("^(m)en$","gi"),people:new RegExp("(pe)ople$","gi"),children:new RegExp("(child)ren$","gi"),tia:new RegExp("([ti])a$","gi"),analyses:new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),hives:new RegExp("(hi|ti)ves$","gi"),curves:new RegExp("(curve)s$","gi"),lrves:new RegExp("([lr])ves$","gi"),foves:new RegExp("([^fo])ves$","gi"),movies:new RegExp("(m)ovies$","gi"),aeiouyies:new RegExp("([^aeiouy]|qu)ies$","gi"),series:new RegExp("(s)eries$","gi"),xes:new RegExp("(x|ch|ss|sh)es$","gi"),mice:new RegExp("([m|l])ice$","gi"),buses:new RegExp("(bus)es$","gi"),oes:new RegExp("(o)es$","gi"),shoes:new RegExp("(shoe)s$","gi"),crises:new RegExp("(cris|ax|test)es$","gi"),octopi:new RegExp("(octop|vir)i$","gi"),aliases:new RegExp("(alias|status)es$","gi"),summonses:new RegExp("^(summons)es$","gi"),oxen:new RegExp("^(ox)en","gi"),matrices:new RegExp("(matr)ices$","gi"),vertices:new RegExp("(vert|ind)ices$","gi"),feet:new RegExp("^feet$","gi"),teeth:new RegExp("^teeth$","gi"),geese:new RegExp("^geese$","gi"),quizzes:new RegExp("(quiz)zes$","gi"),whereases:new RegExp("^(whereas)es$","gi"),ss:new RegExp("ss$","gi"),s:new RegExp("s$","gi")},singular:{man:new RegExp("^(m)an$","gi"),person:new RegExp("(pe)rson$","gi"),child:new RegExp("(child)$","gi"),ox:new RegExp("^(ox)$","gi"),axis:new RegExp("(ax|test)is$","gi"),octopus:new RegExp("(octop|vir)us$","gi"),alias:new RegExp("(alias|status)$","gi"),summons:new RegExp("^(summons)$","gi"),bus:new RegExp("(bu)s$","gi"),buffalo:new RegExp("(buffal|tomat|potat)o$","gi"),tium:new RegExp("([ti])um$","gi"),sis:new RegExp("sis$","gi"),ffe:new RegExp("(?:([^f])fe|([lr])f)$","gi"),hive:new RegExp("(hi|ti)ve$","gi"),aeiouyy:new RegExp("([^aeiouy]|qu)y$","gi"),x:new RegExp("(x|ch|ss|sh)$","gi"),matrix:new RegExp("(matr)ix$","gi"),vertex:new RegExp("(vert|ind)ex$","gi"),mouse:new RegExp("([m|l])ouse$","gi"),foot:new RegExp("^foot$","gi"),tooth:new RegExp("^tooth$","gi"),goose:new RegExp("^goose$","gi"),quiz:new RegExp("(quiz)$","gi"),whereas:new RegExp("^(whereas)$","gi"),s:new RegExp("s$","gi"),common:new RegExp("$","gi")}},c=[[b.plural.men],[b.plural.people],[b.plural.children],[b.plural.tia],[b.plural.analyses],[b.plural.hives],[b.plural.curves],[b.plural.lrves],[b.plural.foves],[b.plural.aeiouyies],[b.plural.series],[b.plural.movies],[b.plural.xes],[b.plural.mice],[b.plural.buses],[b.plural.oes],[b.plural.shoes],[b.plural.crises],[b.plural.octopi],[b.plural.aliases],[b.plural.summonses],[b.plural.oxen],[b.plural.matrices],[b.plural.feet],[b.plural.teeth],[b.plural.geese],[b.plural.quizzes],[b.plural.whereases],[b.singular.man,"$1en"],[b.singular.person,"$1ople"],[b.singular.child,"$1ren"],[b.singular.ox,"$1en"],[b.singular.axis,"$1es"],[b.singular.octopus,"$1i"],[b.singular.alias,"$1es"],[b.singular.summons,"$1es"],[b.singular.bus,"$1ses"],[b.singular.buffalo,"$1oes"],[b.singular.tium,"$1a"],[b.singular.sis,"ses"],[b.singular.ffe,"$1$2ves"],[b.singular.hive,"$1ves"],[b.singular.aeiouyy,"$1ies"],[b.singular.x,"$1es"],[b.singular.matrix,"$1ices"],[b.singular.vertex,"$1ices"],[b.singular.mouse,"$1ice"],[b.singular.foot,"feet"],[b.singular.tooth,"teeth"],[b.singular.goose,"geese"],[b.singular.quiz,"$1zes"],[b.singular.whereas,"$1es"],[b.singular.s,"s"],[b.singular.common,"s"]],d=[[b.singular.man],[b.singular.person],[b.singular.child],[b.singular.ox],[b.singular.axis],[b.singular.octopus],[b.singular.alias],[b.singular.summons],[b.singular.bus],[b.singular.buffalo],[b.singular.tium],[b.singular.sis],[b.singular.ffe],[b.singular.hive],[b.singular.aeiouyy],[b.singular.x],[b.singular.matrix],[b.singular.mouse],[b.singular.foot],[b.singular.tooth],[b.singular.goose],[b.singular.quiz],[b.singular.whereas],[b.plural.men,"$1an"],[b.plural.people,"$1rson"],[b.plural.children,"$1"],[b.plural.tia,"$1um"],[b.plural.analyses,"$1$2sis"],[b.plural.hives,"$1ve"],[b.plural.curves,"$1"],[b.plural.lrves,"$1f"],[b.plural.foves,"$1fe"],[b.plural.movies,"$1ovie"],[b.plural.aeiouyies,"$1y"],[b.plural.series,"$1eries"],[b.plural.xes,"$1"],[b.plural.mice,"$1ouse"],[b.plural.buses,"$1"],[b.plural.oes,"$1"],[b.plural.shoes,"$1"],[b.plural.crises,"$1is"],[b.plural.octopi,"$1us"],[b.plural.aliases,"$1"],[b.plural.summonses,"$1"],[b.plural.oxen,"$1"],[b.plural.matrices,"$1ix"],[b.plural.vertices,"$1ex"],[b.plural.feet,"foot"],[b.plural.teeth,"tooth"],[b.plural.geese,"goose"],[b.plural.quizzes,"$1"],[b.plural.whereases,"$1"],[b.plural.ss,"ss"],[b.plural.s,""]],e=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],f=new RegExp("(_ids|_id)$","g"),g=new RegExp("_","g"),h=new RegExp("[ _]","g"),i=new RegExp("([A-Z])","g"),j=new RegExp("^_"),k={_apply_rules:function(a,b,c,d){if(d)a=d;
else{var e=k.indexOf(c,a.toLowerCase())>-1;if(!e)for(var f=0,g=b.length;g>f;f++)if(a.match(b[f][0])){void 0!==b[f][1]&&(a=a.replace(b[f][0],b[f][1]));break}}return a},indexOf:function(a,b,c,d){c||(c=-1);for(var e=-1,f=c,g=a.length;g>f;f++)if(a[f]===b||d&&d(a[f],b)){e=f;break}return e},pluralize:function(b,d){return k._apply_rules(b,c,a,d)},singularize:function(b,c){return k._apply_rules(b,d,a,c)},inflect:function(b,e,f,g){return e=parseInt(e,10),isNaN(e)?b:0===e||e>1?k._apply_rules(b,c,a,g):k._apply_rules(b,d,a,f)},camelize:function(a,b){for(var c,d,e,f,g=a.split("/"),h=0,i=g.length;i>h;h++){for(c=g[h].split("_"),d=0,e=c.length;e>d;d++)0!==d&&(c[d]=c[d].toLowerCase()),f=c[d].charAt(0),f=b&&0===h&&0===d?f.toLowerCase():f.toUpperCase(),c[d]=f+c[d].substring(1);g[h]=c.join("")}return g.join("::")},underscore:function(a,b){if(b&&a===a.toUpperCase())return a;for(var c=a.split("::"),d=0,e=c.length;e>d;d++)c[d]=c[d].replace(i,"_$1"),c[d]=c[d].replace(j,"");return c.join("/").toLowerCase()},humanize:function(a,b){return a=a.toLowerCase(),a=a.replace(f,""),a=a.replace(g," "),b||(a=k.capitalize(a)),a},capitalize:function(a){return a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)},dasherize:function(a){return a.replace(h,"-")},titleize:function(a){a=a.toLowerCase().replace(g," ");for(var b,c,d,f=a.split(" "),h=0,i=f.length;i>h;h++){for(b=f[h].split("-"),c=0,d=b.length;d>c;c++)k.indexOf(e,b[c].toLowerCase())<0&&(b[c]=k.capitalize(b[c]));f[h]=b.join("-")}return a=f.join(" "),a=a.substring(0,1).toUpperCase()+a.substring(1)},demodulize:function(a){var b=a.split("::");return b[b.length-1]},tableize:function(a){return a=k.underscore(a),a=k.pluralize(a)},classify:function(a){return a=k.camelize(a),a=k.singularize(a)},foreign_key:function(a,b){return a=k.demodulize(a),a=k.underscore(a)+(b?"":"_")+"id"},ordinalize:function(a){for(var b=a.split(" "),c=0,d=b.length;d>c;c++){var e=parseInt(b[c],10);if(!isNaN(e)){var f=b[c].substring(b[c].length-2),g=b[c].substring(b[c].length-1),h="th";"11"!=f&&"12"!=f&&"13"!=f&&("1"===g?h="st":"2"===g?h="nd":"3"===g&&(h="rd")),b[c]+=h}}return b.join(" ")},transform:function(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c];this.hasOwnProperty(e)&&(a=this[e](a))}return a}};return k.version="1.5.3",k})},{}],rsvp:[function(a,b){b.exports=window.RSVP},{}],underscore:[function(a,b){b.exports=window._},{}]},{},[1]);
//# sourceMappingURL=intaglio.min.js.map