!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.Intaglio=a():"undefined"!=typeof global?global.Intaglio=a():"undefined"!=typeof self&&(self.Intaglio=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("rsvp");c.configure("onerror",function(a){console.error(a.message),console.error(a.stack)}),b.exports={repositories:a("./lib/repositories"),ORM:a("./lib/orm"),wrappers:a("./lib/wrappers"),utils:a("./lib/utils")}},{"./lib/orm":4,"./lib/repositories":14,"./lib/utils":21,"./lib/wrappers":23,rsvp:"psHlfu"}],2:[function(a,b){var c=a("./../utils"),d=a("rsvp"),e=a("underscore"),f=c.Class.extend({_model:null,_repository:null,_logger:null,_wrapper:null,_instanceId:null,_originalData:null,_data:null,_events:null,_extensions:null,_isNew:!0,_isDeleted:!1,init:function(){throw new c.Exceptions.AbstractClassException},on:function(a,b){this._checkDeleted(),void 0===this._events[a]&&(this._events[a]=[]),this._events[a].push(b)},trigger:function(a){if(this._checkDeleted(),void 0!==this._events[a]){var b=this;e.each(this._events[a],function(a){a.apply(b)})}},get:function(a){return this._checkDeleted(),this._data[a]},set:function(a,b){this._checkDeleted();var c=this;return e.isObject(a)?e.each(a,function(a,b){c._data[b]=a}):this._data[a]=b,this},save:function(){this._checkDeleted();var a=this;return this.trigger("save"),new d.Promise(function(b,c){var d;if(a._isNew)d=a._repository.create(a._model,a._data);else{var f=!1;if(e.each(a._data,function(b,c){a._originalData[c]!==b&&(f=!0)}),!f)return b(new a._wrapper(a));d=a._repository.save(a._model,a._data)}d.then(function(c){return a._parseData(c),b(new a._wrapper(a))},c)})},"delete":function(){this._checkDeleted();var a=this;return a.trigger("delete"),new d.Promise(function(b,c){a._repository.delete(a._model,a._data).then(function(){return a._isDeleted=!0,b()},c)})},reload:function(){if(this._checkDeleted(),this._isNew)throw new c.Exceptions.UnsavedModelException("Cannot reload a model that has not been saved!");var a=this;return a.trigger("reload"),new d.Promise(function(b,c){a._repository.reload(a._model,a._data).then(function(c){return a._parseData(c),b(new a._wrapper(a))},c)})},getData:function(){return e.extend({},this._data)},getPrimaryKey:function(){return this._model.getPrimaryKey()},getModelName:function(){return this._model.getName()},getSchema:function(){return this._model},_checkDeleted:function(){if(this._isDeleted)throw new c.Exceptions.DeletedModelException},_parseData:function(a){var b=this;b._isNew=!1,a&&e.each(a,function(a,c){var d=b._model.getProperty(c);void 0!==d&&(b._originalData[d.getName()]=a,b._data[d.getName()]=a)})}});b.exports=f},{"./../utils":21,rsvp:"psHlfu",underscore:"69U/Pa"}],3:[function(a,b){var c=a("./../utils"),d=a("rsvp"),e=a("underscore"),f=a("./where"),g=c.Class.extend({_model:null,_modelName:null,_modelSchema:null,_repository:null,_logger:null,_conditions:null,_findOptions:null,_orm:null,init:function(a,b){c.assert("`orm` is a required field!",void 0!==a),c.assert("`modelName` is a required field!",void 0!==b),this._model=a._models[b],this._modelName=b,this._modelSchema=a._getModelSchema(b),this._repository=a._repository,this._logger=a._logger,this._orm=a,this._conditions=[],this._findOptions={}},where:function(a){return new f(this,this._modelSchema.getProperty(a))},limit:function(a){return this._findOptions.limit=a,this},offset:function(a){return this._findOptions.offset=a,this},orderBy:function(a,b){return b=b||"ascending",this._findOptions.orderBy=this._modelSchema.getProperty(a).getOriginalName(),this._findOptions.direction=b,this},create:function(a){return new this._orm._dataWrapper(new this._model(a))},find:function(a){var b=this;return new d.Promise(function(c,d){void 0!==a&&(e.isObject(a)?e.each(a,function(a,c){b.where(c).equals(a)}):b.where(b._modelSchema.getPrimaryKey()[0]).isEqual(a)),b.limit(1),b._repository.find(b._modelSchema,b._findOptions,b._conditions).then(function(a){if(0===a.length)return c(null);var d=new b._model(a[0]);return d._isNew=!1,c(new b._orm._dataWrapper(d))},d)})},findAll:function(){var a=this;return new d.Promise(function(b,c){var d=a._repository.find(a._orm._getModelSchema(a._modelName),a._findOptions,a._conditions);d.then(function(d){var f=[];return e.each(d,function(b){try{var d=new a._model(b);d._isNew=!1,f.push(new a._orm._dataWrapper(d))}catch(e){c(e)}}),b(f)},c)})},getClass:function(){return this._model}});b.exports=g},{"./../utils":21,"./where":11,rsvp:"psHlfu",underscore:"69U/Pa"}],4:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./orm"),f=a("../repositories"),g={};g.create=function(a,b,d,g){return a instanceof f.abstract&&(g=d,d=b,b=a,a={}),new c.Promise(function(c,f){new e(c,f,a,b,d,g)})},g.ready=function(a){return new c.Promise(function(b,e){var f=[];d.each(a,function(a){f.push(a)}),c.all(f).then(function(){b(a)},e)})},b.exports=g},{"../repositories":14,"./orm":5,rsvp:"psHlfu",underscore:"69U/Pa"}],5:[function(a,b){function c(a){return new e.Promise(function(b,c){a._repository.getSchema().then(function(c){a._schema=c,f.each(c.getModels(),function(b){a._models[b.getName()]=d(a,b)}),b(a)},c)})}function d(a,b){return h.extend({_model:b,_repository:a._repository,_logger:a._logger,_wrapper:a._dataWrapper,_getClass:function(){return a._models[this._model.getName()]},init:function(a){var b=this;this._originalData={},this._data={},this._events={},this._conditions=[],this._instanceId=j,j++,f.each(this._model.getProperties(),function(a){b._originalData[a.getName()]=null,b._data[a.getName()]=null}),a&&f.each(a,function(a,c){var d=b._model.getProperty(c);void 0!==d&&(b._originalData[d.getName()]=a,b._data[d.getName()]=a)})}})}var e=a("rsvp"),f=a("underscore"),g=a("./../utils"),h=a("./basemodel"),i=a("./factory"),j=0,k=g.Class.extend({_repository:null,_dataWrapper:null,_options:null,_logger:null,_models:null,_schema:null,init:function(b,d,e,f,h,i){var j=this;g.assert("You must supply a repository to use the ORM!",void 0!==f),this._repository=f,this._dataWrapper=h||a("./../wrappers").vanilla,this._logger=i||console,this._options=e,this._models={},c(this).then(function(){b(j)},d)},factory:function(a){return g.assert("Could not find the model `"+a+"`!",void 0!==this._models[a]),new i(this,a)},extend:function(a,b){var c=this._models[a];f.each(b,function(a){g.assert("Only functions are supported for extensions at this time.",f.isFunction(a))}),this._models[a]=c.extend({_extensions:b})},getSchema:function(){return this._schema},_getModelSchema:function(a){return g.assert("Could not find the model `"+a+"`!",void 0!==this._models[a]),this._schema.getModel(a)}});b.exports=k},{"./../utils":21,"./../wrappers":23,"./basemodel":2,"./factory":3,rsvp:"psHlfu",underscore:"69U/Pa"}],6:[function(a,b){var c=a("./../../utils"),d=a("underscore"),e=a("inflection");b.exports=c.Class.extend({_name:null,_originalName:null,_metadata:null,init:function(a,b){throw this._setName(a),this._metadata=b||{},new c.Exceptions.AbstractClassException},getName:function(){return this._name},getPluralizedName:function(){var a=e.underscore(this.getName()).split("_");return 1===a.length?a[0]=e.pluralize(a[0]):a[a.length-1]=e.pluralize(a[a.length-1]),e.camelize(a.join("_"),!0)},getOriginalName:function(){return this._originalName},getMetadata:function(){return this._metadata},_setName:function(a){c.assert("`name` is a required field!",void 0!==a),c.assert("`name` must be a string!",d.isString(a)),this._name=c.normalizeName(a),this._originalName=a}})},{"./../../utils":21,inflection:26,underscore:"69U/Pa"}],7:[function(a,b){b.exports={Abstract:a("./abstract"),Schema:a("./schema"),Model:a("./model"),Property:a("./property")}},{"./abstract":6,"./model":8,"./property":9,"./schema":10}],8:[function(a,b){var c=a("./../../utils"),d=a("underscore"),e=a("./abstract"),f=a("./property");b.exports=e.extend({_properties:null,init:function(a,b){this._setName(a),this._metadata=b||{},this._properties={}},addProperty:function(a){return c.assert("`property` must be an instance of Schema.Property",a instanceof f),c.assert("Property must not already be defined in the model",void 0===this._properties[a.getName()]),this._properties[a.getName()]=a,this},getProperty:function(a){return this._properties[c.normalizeName(a)]},getProperties:function(){return this._properties},getPrimaryKey:function(){var a=[];for(var b in this._properties)this._properties[b].isPrimaryKey()&&a.push(this._properties[b].getName());return a},getJSON:function(){var a={name:this.getName(),properties:{}};return d.each(this.getProperties(),function(b){a.properties[b.getName()]=b.getJSON()}),a}})},{"./../../utils":21,"./abstract":6,"./property":9,underscore:"69U/Pa"}],9:[function(a,b){var c=(a("./../../utils"),a("./abstract"));b.exports=c.extend({_primaryKey:!1,_required:!1,_type:"String",init:function(a,b,c){this._setName(a),this._type=b||this._type,this._metadata=c||{}},makePrimaryKey:function(){this._primaryKey=!0},isPrimaryKey:function(){return this._primaryKey},makeRequired:function(){this._required=!0},isRequired:function(){return this._required},getType:function(){return this._type},getJSON:function(){return{name:this.getName(),type:this.getType(),primaryKey:this.isPrimaryKey(),required:this.isRequired()}}})},{"./../../utils":21,"./abstract":6}],10:[function(a,b){var c=a("./../../utils"),d=a("underscore"),e=a("./model");b.exports=c.Class.extend({_models:null,init:function(){this._models={}},addModel:function(a){return c.assert("`model` must be an instance of Schema.Model",a instanceof e),c.assert("Model must not already be defined in the schema",void 0===this._models[a.getName()]),this._models[a.getName()]=a,this},getModel:function(a){return this._models[c.normalizeName(a)]},getModels:function(){return this._models},getModelNames:function(){var a=[];return d.each(this._models,function(b){a.push(b.getName())}),a},getJSON:function(){var a={};return d.each(this.getModels(),function(b){a[b.getName()]=b.getJSON()}),a}})},{"./../../utils":21,"./model":8,underscore:"69U/Pa"}],11:[function(a,b){var c=a("./../utils"),d=(a("rsvp"),a("underscore"),c.Class.extend({_factory:null,_field:null,_repository:null,init:function(a,b){c.assert("Factory must be provided!",void 0!==a),c.assert("Property must be provided!",void 0!==b),this._factory=a,this._field=b.getOriginalName(),this._repository=this._factory._repository},isEqual:function(a){return this._factory._conditions.push(new this._repository.where.isEqual(this._field,a)),this._factory},isNotEqual:function(a){return this._factory._conditions.push(new this._repository.where.isNotEqual(this._field,a)),this._factory},isBetween:function(a,b){return this._factory._conditions.push(new this._repository.where.isBetween(this._field,[a,b])),this._factory},isGreaterThan:function(a){return this._factory._conditions.push(new this._repository.where.isGreaterThan(this._field,a)),this._factory},isGreaterThanOrEqual:function(a){return this._factory._conditions.push(new this._repository.where.isGreaterThanOrEqual(this._field,a)),this._factory},isLessThan:function(a){return this._factory._conditions.push(new this._repository.where.isLessThan(this._field,a)),this._factory},isLessThanOrEqual:function(a){return this._factory._conditions.push(new this._repository.where.isLessThanOrEqual(this._field,a)),this._factory},isNull:function(){return this._factory._conditions.push(new this._repository.where.isNull(this._field)),this._factory},isNotNull:function(){return this._factory._conditions.push(new this._repository.where.isNotNull(this._field)),this._factory}}));b.exports=d},{"./../utils":21,rsvp:"psHlfu",underscore:"69U/Pa"}],12:[function(a,b){var c=a("rsvp"),d=a("./../../utils"),e=d.Class.extend({_options:null,_logger:null,_db:null,where:null,init:function(){throw new d.Exceptions.AbstractClassException},getSchema:function(){return new c.Promise(function(){})},find:function(){return new c.Promise(function(){})},create:function(){return new c.Promise(function(){})},save:function(){return new c.Promise(function(){})},"delete":function(){return new c.Promise(function(){})}});b.exports=e},{"./../../utils":21,rsvp:"psHlfu"}],13:[function(a,b){var c=a("./../../utils"),d=c.Class.extend({field:null,value:null,init:function(a,b){throw this.field=a,this.value=b,new c.Exceptions.AbstractClassException}});b.exports={isEqual:d.extend(),isNotEqual:d.extend(),isBetween:d.extend(),isGreaterThan:d.extend(),isGreaterThanOrEqual:d.extend(),isLessThan:d.extend(),isLessThanOrEqual:d.extend(),isNull:d.extend(),isNotNull:d.extend()}},{"./../../utils":21}],14:[function(a,b){b.exports={"abstract":a("./abstract/repository"),mysql:a("./mysql"),rest:a("./rest")}},{"./abstract/repository":12,"./mysql":25,"./rest":17}],15:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./../../../utils"),f=a("./response"),g=e.Class.extend({logger:null,baseUrl:null,init:function(a,b){e.assert("`options` must be an object!",d.isObject(a)),e.assert("Options must have a baseUrl string!",d.isString(a.baseUrl)),this.baseUrl=a.baseUrl,this.logger=b||console},get:function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){jQuery.ajax({url:d.baseUrl+a,type:"GET",headers:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){e(c)})})},post:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,g){jQuery.ajax({url:e.baseUrl+a,type:"POST",headers:d,data:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){g(c)})})},put:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,g){jQuery.ajax({url:e.baseUrl+a,type:"PUT",headers:d,data:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){g(c)})})},"delete":function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){jQuery.ajax({url:d.baseUrl+a,type:"DELETE",headers:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){e(c)})})}});b.exports=g},{"./../../../utils":21,"./response":16,rsvp:"psHlfu",underscore:"69U/Pa"}],16:[function(a,b){var c=a("./../../../utils"),d=c.Class.extend({data:null,statusCode:null,logger:null,init:function(a,b,d){c.assert("`data` is a required field!",void 0!==a),c.assert("`statusCode` is a required field!",void 0!==b),this.data=a,this.statusCode=b,this.logger=d||console}});b.exports=d},{"./../../../utils":21}],17:[function(a,b){function c(a){var b={from:null,where:null,limit:null,offset:null,orderBy:null,direction:null},c=e.extend({},b,a);return url="?"+d(c.where),c.orderBy&&(url+="&_order="+c.orderBy,c.direction&&(url+=":"+c.direction)),c.limit&&(url+="&_limit="+c.limit),c.offset&&(url+="&_offset="+c.offset),url}function d(a){var b=[];return e.each(a,function(a){b.push(a.toQuery())}),b.join("&")}var e=a("underscore"),f=a("rsvp"),g=a("./../abstract/repository"),h=a("./../../utils"),i=a("./../../orm/schema"),j={jquery:a("./driver/jquery")},k=g.extend({where:null,_schemaPromise:null,_driver:null,init:function(b,c,d){h.assert("`options` must be an object!",e.isObject(b)),h.assert("`options` must provide a driver to use",void 0!==b.driver),this._options=b,this._logger=c||console,j=d||a("./driver/"+b.driver),this._driver=new j(this._options,this._logger),this.where=a("./where")},getSchema:function(){var a=this;return this._schemaPromise?this._schemaPromise:(this._schemaPromise=new f.Promise(function(b,c){a._driver.get("/schema").then(function(a){var c=new i.Schema;e.each(a.data,function(a){var b=new i.Model(a.name);e.each(a.properties,function(a){var c=new i.Property(a.name,a.type);a.primaryKey&&c.makePrimaryKey(),a.required&&c.makeRequired(),b.addProperty(c)}),c.addModel(b)}),b(c)},c)}),this._schemaPromise)},find:function(a,b,d){var g=this;return b=b||{},new f.Promise(function(f,h){var i="/api/"+a.getOriginalName(),j=null;if(e.each(d,function(b){a.getProperty(b.field).isPrimaryKey()&&b instanceof g.where.isEqual&&(j=b.value)}),null!==j)i+="/"+j,g._driver.get(i).then(function(a){return 200!==a.statusCode?f([]):(f([a.data]),void 0)},h);else{var k={limit:null,offset:null,orderBy:null,direction:null,from:a.getOriginalName(),where:d};i+=c(e.extend({},k,b)),g._driver.get(i).then(function(b){return 200!==b.statusCode?f([]):(f(b.data._embedded[a.getOriginalName()]),void 0)},h)}})},create:function(a,b){var c=this;return new f.Promise(function(d,f){function g(a,b){e.each(a.getProperties(),function(a){if(a.isRequired()&&(!e.has(b,a.getName())||null===b[a.getName()]))throw new h.Exceptions.ValidationException("Object missing required fields!")})}g(a,b);var i=e.keys(b),j={},k="/api/"+a.getOriginalName();e.each(i,function(c){a.getProperty(c)&&(j[a.getProperty(c).getOriginalName()]=b[c])}),c._driver.post(k,j).then(function(g){var h=[];e.each(a.getPrimaryKey(),function(d){"id"==d&&null===b[d]?h.push(new c.where.isEqual(a.getProperty(d).getOriginalName(),g.data.id)):h.push(new c.where.isEqual(a.getProperty(d).getOriginalName(),b[d]))}),c.find(a,{},h).then(function(a){return d(a[0])},f)},f)})},save:function(a,b){var c=this;return new f.Promise(function(d,f){var g=e.keys(b),h={},i="/api/"+a.getOriginalName()+"/",j=null,k=[];e.each(a.getPrimaryKey(),function(a){j=b[a],k.push(new c.where.isEqual(a,b[a]))}),i+=j,e.each(g,function(c){a.getProperty(c)&&(h[a.getProperty(c).getOriginalName()]=b[c])}),c._driver.post(i,h).then(function(){c.find(a,{limit:1},k).then(function(a){return d(a[0])},f)},f)})},"delete":function(a,b){var c=this;return new f.Promise(function(d,f){var g="/api/"+a.getOriginalName();e.each(a.getPrimaryKey(),function(a){g+="/"+b[a]}),c._driver.delete(g).then(function(a){d(a.data)},f)})},reload:function(a,b){var c=this;return new f.Promise(function(d,f){var g=[];e.each(a.getPrimaryKey(),function(a){g.push(new c.where.isEqual(a,b[a]))}),c.find(a,{limit:1},g).then(function(a){return d(a[0])},f)})}});b.exports=k},{"./../../orm/schema":7,"./../../utils":21,"./../abstract/repository":12,"./driver/jquery":15,"./where":18,rsvp:"psHlfu",underscore:"69U/Pa"}],18:[function(a,b){var c=a("./../abstract/where"),d=a("./../../utils"),e=a("underscore"),f={};f.isEqual=c.isEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"="+this.value}}),f.isNotEqual=c.isNotEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<>"+this.value}}),f.isBetween=c.isBetween.extend({init:function(a,b){this.field=a,this.value=b,d.assert("Value must be an array with only two items",e.isArray(b)&&2===b.length)},toQuery:function(){return this.field+"="+this.value[0]+"|"+this.value[1]}}),f.isGreaterThan=c.isGreaterThan.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=>"+this.value}}),f.isGreaterThanOrEqual=c.isGreaterThanOrEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=>="+this.value}}),f.isLessThan=c.isLessThan.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<"+this.value}}),f.isLessThanOrEqual=c.isLessThanOrEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<="+this.value}}),f.isNull=c.isNull.extend({init:function(a){this.field=a},toQuery:function(){return this.field+"=:NULL:"}}),f.isNotNull=c.isNotNull.extend({init:function(a){this.field=a},toQuery:function(){return this.field+"=<>:NULL:"}}),b.exports=f},{"./../../utils":21,"./../abstract/where":13,underscore:"69U/Pa"}],19:[function(a,b,c){var d=!1,e=/xyz/.test(function(){})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(a){var b=this.prototype;d=!0;var c=new this;d=!1;for(var f in a)c[f]="function"==typeof a[f]&&"function"==typeof b[f]&&e.test(a[f])?function(a,c){return function(){var d=this._super;this._super=b[a];var e=c.apply(this,arguments);return this._super=d,e}}(f,a[f]):a[f];return Class=function(){!d&&this.init&&this.init.apply(this,arguments)},Class.prototype=c,Class.constructor=Class,Class.extend=arguments.callee,Class},"undefined"!=typeof c&&(c.Class=Class)},{}],20:[function(a,b){function c(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}var d=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"An assertion made did not pass!"};c(d,Error),d.prototype.name="AssertionException";var e=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Object did not pass validation!"};c(e,Error),e.prototype.name="ValidationException";var f=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"This class is abstract and cannot be instantiated!"};c(f,Error),f.prototype.name="AbstractClassException";var g=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Deleted object access is not allowed!"};c(g,Error),g.prototype.name="DeletedModelException";var h=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Model must be saved first!"};c(h,Error),h.prototype.name="UnsavedModelException",b.exports={AssertionException:d,ValidationException:e,AbstractClassException:f,DeletedModelException:g,UnsavedModelException:h}},{}],21:[function(a,b){var c={},d=a("./exceptions"),e=a("inflection");b.exports=c,c.assert=function(a,b){if(b!==!0)throw new d.AssertionException(a)},c.Class=a("./class").Class,c.Exceptions=d,c.curry=function(a,b){for(var c=[],d=2,e=arguments.length;e>d;d++)c.push(arguments[d]);return function(){for(var d=c.slice(0),e=0,f=arguments.length;f>e;e++)d.push(arguments[e]);return a.apply(b,d)}},c.normalizeName=function(a){var b,c,d=a.replace(/(\s|\_)+/g," ").trim().split(" ");return 1===d.length?d[0]=e.singularize(d[0]):(c=d.pop(),d.push(e.singularize(c))),b=d.join("_"),e.camelize(e.underscore(b),!0)}},{"./class":19,"./exceptions":20,inflection:26}],22:[function(a,b){var c=(a("rsvp"),a("./../utils")),d=c.Class.extend({_object:null,init:function(){throw new c.Exceptions.AbstractClassException},get:function(a){return this._object.get(a)},set:function(a,b){return this._object.set(a,b)},on:function(a,b){return this._object.on(a,b)},trigger:function(a){return this._object.trigger(a)},save:function(){return this._object.save()},"delete":function(){return this._object.delete()},reload:function(){return this._object.reload()},getRawData:function(){return this._object.getData()}});b.exports=d},{"./../utils":21,rsvp:"psHlfu"}],23:[function(a,b){b.exports={"abstract":a("./abstract"),vanilla:a("./vanilla")}},{"./abstract":22,"./vanilla":24}],24:[function(a,b){var c=(a("rsvp"),a("./../utils"),a("./abstract")),d=c.extend({init:function(a){this._object=a}});b.exports=d},{"./../utils":21,"./abstract":22,rsvp:"psHlfu"}],25:[function(){},{}],26:[function(a,b,c){!function(a){var d=["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],e=[[new RegExp("(m)en$","gi")],[new RegExp("(pe)ople$","gi")],[new RegExp("(child)ren$","gi")],[new RegExp("([ti])a$","gi")],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi")],[new RegExp("(hive)s$","gi")],[new RegExp("(tive)s$","gi")],[new RegExp("(curve)s$","gi")],[new RegExp("([lr])ves$","gi")],[new RegExp("([^fo])ves$","gi")],[new RegExp("([^aeiouy]|qu)ies$","gi")],[new RegExp("(s)eries$","gi")],[new RegExp("(m)ovies$","gi")],[new RegExp("(x|ch|ss|sh)es$","gi")],[new RegExp("([m|l])ice$","gi")],[new RegExp("(bus)es$","gi")],[new RegExp("(o)es$","gi")],[new RegExp("(shoe)s$","gi")],[new RegExp("(cris|ax|test)es$","gi")],[new RegExp("(octop|vir)i$","gi")],[new RegExp("(alias|status)es$","gi")],[new RegExp("^(ox)en","gi")],[new RegExp("(vert|ind)ices$","gi")],[new RegExp("(matr)ices$","gi")],[new RegExp("(quiz)zes$","gi")],[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],f=[[new RegExp("(m)an$","gi")],[new RegExp("(pe)rson$","gi")],[new RegExp("(child)$","gi")],[new RegExp("^(ox)$","gi")],[new RegExp("(ax|test)is$","gi")],[new RegExp("(octop|vir)us$","gi")],[new RegExp("(alias|status)$","gi")],[new RegExp("(bu)s$","gi")],[new RegExp("(buffal|tomat|potat)o$","gi")],[new RegExp("([ti])um$","gi")],[new RegExp("sis$","gi")],[new RegExp("(?:([^f])fe|([lr])f)$","gi")],[new RegExp("(hive)$","gi")],[new RegExp("([^aeiouy]|qu)y$","gi")],[new RegExp("(x|ch|ss|sh)$","gi")],[new RegExp("(matr|vert|ind)ix|ex$","gi")],[new RegExp("([m|l])ouse$","gi")],[new RegExp("(quiz)$","gi")],[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("ss$","gi"),"ss"],[new RegExp("s$","gi"),""]],g=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],h=new RegExp("(_ids|_id)$","g"),i=new RegExp("_","g"),j=new RegExp("[ _]","g"),k=new RegExp("([A-Z])","g"),l=new RegExp("^_"),m={_apply_rules:function(a,b,c,d){if(d)a=d;else{var e=m.indexOf(c,a.toLowerCase())>-1;if(!e)for(var f=0,g=b.length;g>f;f++)if(a.match(b[f][0])){void 0!==b[f][1]&&(a=a.replace(b[f][0],b[f][1]));break}}return a},indexOf:function(a,b,c,d){c||(c=-1);for(var e=-1,f=c,g=a.length;g>f;f++)if(a[f]===b||d&&d(a[f],b)){e=f;break}return e},pluralize:function(a,b){return m._apply_rules(a,e,d,b)},singularize:function(a,b){return m._apply_rules(a,f,d,b)},camelize:function(a,b){for(var c=a.toLowerCase().split("/"),d=0,e=c.length;e>d;d++){for(var f=c[d].split("_"),g=b&&d+1===e?1:0,h=g,i=f.length;i>h;h++)f[h]=f[h].charAt(0).toUpperCase()+f[h].substring(1);c[d]=f.join("")}return c.join("::")},underscore:function(a,b){if(b&&a===a.toUpperCase())return a;for(var c=a.split("::"),d=0,e=c.length;e>d;d++)c[d]=c[d].replace(k,"_$1"),c[d]=c[d].replace(l,"");return c.join("/").toLowerCase()},humanize:function(a,b){return a=a.toLowerCase(),a=a.replace(h,""),a=a.replace(i," "),b||(a=m.capitalize(a)),a},capitalize:function(a){return a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)},dasherize:function(a){return a.replace(j,"-")},titleize:function(a){a=a.toLowerCase().replace(i," ");for(var b=a.split(" "),c=0,d=b.length;d>c;c++){for(var e=b[c].split("-"),f=0,h=e.length;h>f;f++)m.indexOf(g,e[f].toLowerCase())<0&&(e[f]=m.capitalize(e[f]));b[c]=e.join("-")}return a=b.join(" "),a=a.substring(0,1).toUpperCase()+a.substring(1)},demodulize:function(a){var b=a.split("::");return b[b.length-1]},tableize:function(a){return a=m.underscore(a),a=m.pluralize(a)},classify:function(a){return a=m.camelize(a),a=m.singularize(a)},foreign_key:function(a,b){return a=m.demodulize(a),a=m.underscore(a)+(b?"":"_")+"id"},ordinalize:function(a){for(var b=a.split(" "),c=0,d=b.length;d>c;c++){var e=parseInt(b[c],10);if(!isNaN(e)){var f=b[c].substring(b[c].length-2),g=b[c].substring(b[c].length-1),h="th";"11"!=f&&"12"!=f&&"13"!=f&&("1"===g?h="st":"2"===g?h="nd":"3"===g&&(h="rd")),b[c]+=h}}return b.join(" ")}};return"undefined"==typeof c?a.inflection=m:(m.version="1.2.5",b.exports=m,void 0)}(this)},{}],rsvp:[function(a,b){b.exports=a("psHlfu")},{}],psHlfu:[function(a,b){b.exports=window.RSVP},{}],underscore:[function(a,b){b.exports=a("69U/Pa")},{}],"69U/Pa":[function(a,b){b.exports=window._},{}]},{},[1])(1)});
//# sourceMappingURL=dist/intaglio.min.js.map