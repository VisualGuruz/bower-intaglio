!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.Intaglio=a():"undefined"!=typeof global?global.Intaglio=a():"undefined"!=typeof self&&(self.Intaglio=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("rsvp");c.configure("onerror",function(a){console.error(a.message),console.error(a.stack)}),b.exports={repositories:a("./lib/repositories"),ORM:a("./lib/orm"),decorators:a("./lib/decorators"),utils:a("./lib/utils")}},{"./lib/decorators":3,"./lib/orm":6,"./lib/repositories":11,"./lib/utils":24,rsvp:"psHlfu"}],2:[function(a,b){var c=a("underscore"),d={unknownProperty:function(a){return this.get(a)},setUnknownProperty:function(a,b){return Ember.propertyWillChange(this,a),this.set(a,b),Ember.propertyDidChange(this,a),this},reload:function(){var a=this.getData(),b=this;this.reload().then(function(d){var e=d.getData(),f=[];c.each(e,function(b,c){a[c]!==b&&f.push(c)}),c.each(f,function(a){Ember.propertyWillChange(b,a),Ember.propertyDidChange(b,a)})})}};b.exports=d},{underscore:"69U/Pa"}],3:[function(a,b){b.exports={Ember:a("./ember")}},{"./ember":2}],4:[function(a,b){var c=a("./../utils"),d=a("rsvp"),e=a("underscore"),f=c.Class.extend({_model:null,_repository:null,_logger:null,_instanceId:null,_originalData:null,_data:null,_events:null,_extensions:null,_isNew:!0,_isDeleted:!1,_isSetup:!1,init:function(){throw new c.Exceptions.AbstractClassException},on:function(a,b){c.assert("Callback must be a function!",e.isFunction(b)),this._checkDeleted(),void 0===this._events[a]&&(this._events[a]=[]),this._events[a].push(b)},trigger:function(a){if(this._checkDeleted(),void 0!==this._events[a]){var b=this;e.each(this._events[a],function(a){a.apply(b)})}},get:function(a){return this._checkDeleted(),this._data[a]},set:function(a,b){this._checkDeleted();var c=this;return e.isObject(a)?e.each(a,function(a,b){c._data[b]=a}):this._data[a]=b,this},save:function(){this._checkDeleted();var a=this;return this.trigger("save"),new d.Promise(function(b,d){var e;if(a._isNew)e=a._repository.create(a._model,a._model.translateObjectToRepository(a._data));else{if(0===a.getFieldsPendingChange().length)return b(c.decorateObject(a,a._orm.getDecorations()));e=a._repository.save(a._model,a._model.translateObjectToRepository(a._originalData),a._model.translateObjectToRepository(a._data))}e.then(function(d){return a._parseData(a._model.translateObjectToOrm(d)),b(c.decorateObject(a,a._orm.getDecorations()))},d)})},"delete":function(){this._checkDeleted();var a=this;return a.trigger("delete"),new d.Promise(function(b,c){a._repository.delete(a._model,a._data).then(function(){return a._isDeleted=!0,b(a)},c)})},reload:function(){if(this._checkDeleted(),this._isNew)throw new c.Exceptions.UnsavedModelException("Cannot reload a model that has not been saved!");var a=this;return a.trigger("reload"),new d.Promise(function(b,d){a._repository.reload(a._model,a._model.translateObjectToRepository(a._data)).then(function(d){return a._parseData(a._model.translateObjectToOrm(d)),b(c.decorateObject(a,a._orm.getDecorations()))},d)})},getData:function(){return e.extend({},this._data)},getPrimaryKey:function(){return this._model.getPrimaryKey()},getModelName:function(){return this._model.getName()},getSchema:function(){return this._model},getFieldsPendingChange:function(){var a=[],b=this;return e.each(this._data,function(c,d){b._originalData[d]!==c&&a.push(d)}),a},setup:function(a,b,d){if(this._isSetup)throw new c.Exceptions.ModelInstantiationException("Cannot call setup() on a model that has already been setup!");var f=this;this._originalData={},this._data={},this._events={},this._conditions=[],this._isSetup=!0,this._instanceId=a,e.each(this._model.getProperties(),function(a){f._originalData[a.getName()]=null,f._data[a.getName()]=null}),this._parseData(b,d)},getClass:function(){return this._orm.getClass(this._model.getName())},_checkDeleted:function(){if(this._isDeleted)throw new c.Exceptions.DeletedModelException},_parseData:function(a,b){var c=this;void 0===b&&(b=!0),c._isNew=b,a&&e.each(a,function(a,b){var d=c._model.getProperty(b);void 0!==d&&(c._originalData[d.getName()]=a,c._data[d.getName()]=a)})}});b.exports=f},{"./../utils":24,rsvp:"psHlfu",underscore:"69U/Pa"}],5:[function(a,b){var c=a("./../utils"),d=a("rsvp"),e=a("underscore"),f=a("./where"),g=c.Class.extend({_model:null,_modelName:null,_modelSchema:null,_repository:null,_logger:null,_conditions:null,_findOptions:null,_orm:null,init:function(a,b){c.assert("`orm` is a required field!",void 0!==a),c.assert("`modelName` is a required field!",void 0!==b),this._model=a._models[b],this._modelName=b,this._modelSchema=a.getSchema().getModel(b),this._repository=a._repository,this._logger=a._logger,this._orm=a,this._conditions=[],this._findOptions={}},where:function(a){return new f(this,this._modelSchema.getProperty(a))},limit:function(a){return this._findOptions.limit=a,this},offset:function(a){return this._findOptions.offset=a,this},orderBy:function(a,b){return b=b||"ascending",this._findOptions.orderBy=this._modelSchema.getProperty(a).getOriginalName(),this._findOptions.direction=b,this},create:function(a){return c.instantiateModel(this._orm,this._model,a)},find:function(a){var b=this;return new d.Promise(function(d,f){void 0!==a&&(e.isObject(a)?e.each(a,function(a,c){b.where(c).isEqual(a)}):b.where(b._modelSchema.getPrimaryKey()[0].getName()).isEqual(a)),b.limit(1),b._repository.find(b._modelSchema,b._findOptions,b._conditions).then(function(a){if(0===a.length)return d(null);var e=c.instantiateModel(b._orm,b._model,b._modelSchema.translateObjectToOrm(a[0]),!1);return e._isNew=!1,d(e)},f)})},findAll:function(){var a=this;return new d.Promise(function(b,d){var f=a._repository.find(a._modelSchema,a._findOptions,a._conditions);f.then(function(f){var g=[];return e.each(f,function(b){try{var e=c.instantiateModel(a._orm,a._model,a._modelSchema.translateObjectToOrm(b),!1);e._isNew=!1,g.push(e)}catch(f){d(f)}}),b(g)},d)})},getClass:function(){return this._model}});b.exports=g},{"./../utils":24,"./where":8,rsvp:"psHlfu",underscore:"69U/Pa"}],6:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./orm"),f=(a("../repositories"),{});f.create=function(a,b){return new c.Promise(function(c,d){var f=new e(a,b);f.ready().then(c,d)})},f.ready=function(a){return new c.Promise(function(b,e){var f=[];d.each(a,function(a){f.push(a)}),c.all(f).then(function(){b(a)},e)})},b.exports=f},{"../repositories":11,"./orm":7,rsvp:"psHlfu",underscore:"69U/Pa"}],7:[function(a,b){function c(a){a._readyPromise=new e.Promise(function(b,c){a._repository.getSchema().then(function(c){a._schema=c,f.each(c.getModels(),function(b){a._models[b.getName()]=d(a,b)}),b(a)},c)})}function d(a,b){return h.extend({_orm:a,_repository:a._repository,_model:b,_logger:a._logger,init:function(a,b){this.setup(j,a,b),j++}})}var e=a("rsvp"),f=a("underscore"),g=a("./../utils"),h=a("./basemodel"),i=a("./factory"),j=0,k=g.Class.extend({_repository:null,_decorations:null,_logger:null,_classes:null,_schema:null,_readyPromise:null,init:function(a,b){g.assert("You must supply a repository to use the ORM!",void 0!==a),this._repository=a,this._logger=b||console,this._models={},this._decorations=[],c(this)},ready:function(){return this._readyPromise},factory:function(a){return g.assert("Could not find the model `"+a+"`!",void 0!==this._models[a]),new i(this,a)},extend:function(a,b){var c=this._models[a];this._models[a]=c.extend(b)},decorate:function(a){this._decorations.push(a)},getDecorations:function(){return this._decorations},getSchema:function(){return this._schema},getRepository:function(){return this._repository},getClass:function(a){return this._models[a]}});b.exports=k},{"./../utils":24,"./basemodel":4,"./factory":5,rsvp:"psHlfu",underscore:"69U/Pa"}],8:[function(a,b){var c=a("./../utils"),d=(a("rsvp"),a("underscore"),c.Class.extend({_factory:null,_field:null,_repository:null,init:function(a,b){c.assert("Factory must be provided!",void 0!==a),c.assert("Property must be provided!",void 0!==b),this._factory=a,this._field=b.getOriginalName(),this._repository=this._factory._repository},isEqual:function(a){return this._factory._conditions.push(new this._repository.where.isEqual(this._field,a)),this._factory},isNotEqual:function(a){return this._factory._conditions.push(new this._repository.where.isNotEqual(this._field,a)),this._factory},isBetween:function(a,b){return this._factory._conditions.push(new this._repository.where.isBetween(this._field,[a,b])),this._factory},isGreaterThan:function(a){return this._factory._conditions.push(new this._repository.where.isGreaterThan(this._field,a)),this._factory},isGreaterThanOrEqual:function(a){return this._factory._conditions.push(new this._repository.where.isGreaterThanOrEqual(this._field,a)),this._factory},isLessThan:function(a){return this._factory._conditions.push(new this._repository.where.isLessThan(this._field,a)),this._factory},isLessThanOrEqual:function(a){return this._factory._conditions.push(new this._repository.where.isLessThanOrEqual(this._field,a)),this._factory},isNull:function(){return this._factory._conditions.push(new this._repository.where.isNull(this._field)),this._factory},isNotNull:function(){return this._factory._conditions.push(new this._repository.where.isNotNull(this._field)),this._factory}}));b.exports=d},{"./../utils":24,rsvp:"psHlfu",underscore:"69U/Pa"}],9:[function(a,b){var c=(a("rsvp"),a("./../../utils")),d=a("underscore"),e=c.Class.extend({_options:null,_logger:null,where:null,init:function(){throw new c.Exceptions.AbstractClassException},getSchema:function(){},find:function(){},create:function(){},save:function(){},"delete":function(){},_validateFields:function(a,b){d.each(a.getProperties(),function(a){if(a.isRequired()&&(!d.has(b,a.getOriginalName())||null===b[a.getOriginalName()]))throw new c.Exceptions.ValidationException("Object missing required field `"+a.getName()+"`!")})}});b.exports=e},{"./../../utils":24,rsvp:"psHlfu",underscore:"69U/Pa"}],10:[function(a,b){var c=a("./../../utils"),d=c.Class.extend({field:null,value:null,init:function(){throw new c.Exceptions.AbstractClassException}});b.exports={isEqual:d.extend(),isNotEqual:d.extend(),isBetween:d.extend(),isGreaterThan:d.extend(),isGreaterThanOrEqual:d.extend(),isLessThan:d.extend(),isLessThanOrEqual:d.extend(),isNull:d.extend(),isNotNull:d.extend()}},{"./../../utils":24}],11:[function(a,b){b.exports={"abstract":a("./abstract/repository"),mysql:a("./mysql"),rest:a("./rest")}},{"./abstract/repository":9,"./mysql":25,"./rest":15}],12:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./../../../utils"),f=a("./response"),g=e.Class.extend({logger:null,baseUrl:null,init:function(a,b){e.assert("`options` must be an object!",d.isObject(a)),e.assert("Options must have a baseUrl string!",d.isString(a.baseUrl)),this.baseUrl=a.baseUrl,this.logger=b||console},get:function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){jQuery.ajax({url:d.baseUrl+a,type:"GET",headers:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){e(c)})})},post:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,g){jQuery.ajax({url:e.baseUrl+a,type:"POST",headers:d,data:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){g(c)})})},put:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,g){jQuery.ajax({url:e.baseUrl+a,type:"PUT",headers:d,data:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){g(c)})})},"delete":function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){jQuery.ajax({url:d.baseUrl+a,type:"DELETE",headers:b}).then(function(a,b,d){c(new f(a,d.status,this.logger))},function(a,b,c){e(c)})})}});b.exports=g},{"./../../../utils":24,"./response":14,rsvp:"psHlfu",underscore:"69U/Pa"}],13:[function(a,b){var c=a("rsvp"),d=a("underscore"),e=a("./../../../utils"),f=a("request"),g=a("./response"),h=e.Class.extend({logger:null,baseUrl:null,init:function(a,b){e.assert("`options` must be an object!",d.isObject(a)),e.assert("Options must have a baseUrl string!",d.isString(a.baseUrl)),this.baseUrl=a.baseUrl,this.logger=b||console},get:function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){f({url:d.baseUrl+a,headers:b,method:"GET"},function(a,b,d){a&&e(a),c(new g(JSON.parse(d),b.statusCode,this.logger))})})},post:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,h){f({url:e.baseUrl+a,headers:d,method:"POST",json:b},function(a,b,d){a&&h(a),c(new g(d,b.statusCode,this.logger))})})},put:function(a,b,d){var e=this;return d=d||{},new c.Promise(function(c,h){f({url:e.baseUrl+a,headers:d,method:"PUT",json:b},function(a,b,d){a&&h(a),c(new g(d,b.statusCode,this.logger))})})},"delete":function(a,b){var d=this;return b=b||{},new c.Promise(function(c,e){f({url:d.baseUrl+a,headers:b,method:"DELETE"},function(a,b,d){a&&e(a),c(new g(d,b.statusCode,this.logger))})})}});b.exports=h},{"./../../../utils":24,"./response":14,request:25,rsvp:"psHlfu",underscore:"69U/Pa"}],14:[function(a,b){var c=a("./../../../utils"),d=c.Class.extend({data:null,statusCode:null,logger:null,init:function(a,b,d){c.assert("`data` is a required field!",void 0!==a),c.assert("`statusCode` is a required field!",void 0!==b),this.data=a,this.statusCode=b,this.logger=d||console}});b.exports=d},{"./../../../utils":24}],15:[function(a,b){function c(a){var b={from:null,where:null,limit:null,offset:null,orderBy:null,direction:null},c=e.extend({},b,a),f=d(c.where);return c.orderBy&&(f+="&_order="+c.orderBy,c.direction&&(f+=":"+c.direction)),c.limit&&(f+="&_limit="+c.limit),c.offset&&(f+="&_offset="+c.offset),f}function d(a){var b=[];return void 0===a||0===a.length?"":(e.each(a,function(a){b.push(a.toQuery())}),"?"+b.join("&"))}var e=a("underscore"),f=a("rsvp"),g=a("./../abstract/repository"),h=a("./../../utils"),i=a("./../../schema"),j=g.extend({where:null,_schemaPromise:null,_driver:null,init:function(b,c){h.assert("A driver must be provided!",void 0!==b),this._logger=c||console,this._driver=b,this.where=a("./where")},getSchema:function(){var a=this;return this._schemaPromise?this._schemaPromise:(this._schemaPromise=new f.Promise(function(b,c){a._driver.get("/schema").then(function(a){var c=new i.Schema;e.each(a.data,function(a){var b=new i.Model(a.name);e.each(a.properties,function(a){var c=new i.Property(a.name,a.type);a.primaryKey&&c.makePrimaryKey(),a.required&&c.makeRequired(),b.addProperty(c)}),c.addModel(b)}),b(c)},c)}),this._schemaPromise)},find:function(a,b,d){var g=this;return b=b||{},new f.Promise(function(f,h){var i="/api/"+a.getOriginalName(),j=null;if(e.each(d,function(b){a.getProperty(b.field).isPrimaryKey()&&b instanceof g.where.isEqual&&(j=b.value)}),null!==j)i+="/"+j,g._driver.get(i).then(function(a){return f(200!==a.statusCode?[]:[a.data])},h);else{var k={limit:null,offset:null,orderBy:null,direction:null,from:a.getOriginalName(),where:d};i+=c(e.extend({},k,b)),g._driver.get(i).then(function(b){return 200!==b.statusCode?f([]):void f(b.data._embedded[a.getOriginalName()])},h)}})},create:function(a,b){var c=this;return new f.Promise(function(d,f){c._validateFields(a,b);var g=e.keys(b),h={},i="/api/"+a.getOriginalName();e.each(g,function(c){a.getProperty(c)&&(h[a.getProperty(c).getOriginalName()]=b[c])}),c._driver.post(i,h).then(function(g){var h=[];e.each(a.getPrimaryKey(),function(a){h.push("id"===a.getOriginalName()&&e.isEmpty(b[a.getOriginalName()])?new c.where.isEqual(a.getOriginalName(),g.data.id):new c.where.isEqual(a.getOriginalName(),b[a.getOriginalName()]))}),c.find(a,{},h).then(function(a){return d(a[0])},f)},f)})},save:function(a,b,c){var d=this;return new f.Promise(function(f,g){var h=e.keys(c),i={},j="/api/"+a.getOriginalName()+"/",k=null,l=[];e.each(a.getPrimaryKey(),function(a){k=b[a.getOriginalName()],l.push(new d.where.isEqual(a.getOriginalName(),c[a.getOriginalName()]))}),j+=k,e.each(h,function(b){a.getProperty(b)&&(i[a.getProperty(b).getOriginalName()]=c[b])}),d._driver.put(j,i).then(function(){d.find(a,{limit:1},l).then(function(a){return f(a[0])},g)},g)})},"delete":function(a,b){var c=this;return new f.Promise(function(d,f){var g="/api/"+a.getOriginalName();e.each(a.getPrimaryKey(),function(a){g+="/"+b[a.getOriginalName()]}),c._driver.delete(g).then(function(a){d(a.data)},f)})},reload:function(a,b){var c=this;return new f.Promise(function(d,f){var g=[];e.each(a.getPrimaryKey(),function(a){g.push(new c.where.isEqual(a,b[a]))}),c.find(a,{limit:1},g).then(function(a){return d(a[0])},f)})}});j.Drivers={jQuery:a("./driver/jquery"),Node:a("./driver/node"),Mock:a("./driver/mock")},b.exports=j},{"./../../schema":18,"./../../utils":24,"./../abstract/repository":9,"./driver/jquery":12,"./driver/mock":25,"./driver/node":13,"./where":16,rsvp:"psHlfu",underscore:"69U/Pa"}],16:[function(a,b){var c=a("./../abstract/where"),d=a("./../../utils"),e=a("underscore"),f={};f.isEqual=c.isEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"="+this.value}}),f.isNotEqual=c.isNotEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<>"+this.value}}),f.isBetween=c.isBetween.extend({init:function(a,b){this.field=a,this.value=b,d.assert("Value must be an array with only two items",e.isArray(b)&&2===b.length)},toQuery:function(){return this.field+"="+this.value[0]+"|"+this.value[1]}}),f.isGreaterThan=c.isGreaterThan.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=>"+this.value}}),f.isGreaterThanOrEqual=c.isGreaterThanOrEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=>="+this.value}}),f.isLessThan=c.isLessThan.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<"+this.value}}),f.isLessThanOrEqual=c.isLessThanOrEqual.extend({init:function(a,b){this.field=a,this.value=b},toQuery:function(){return this.field+"=<="+this.value}}),f.isNull=c.isNull.extend({init:function(a){this.field=a},toQuery:function(){return this.field+"=:NULL:"}}),f.isNotNull=c.isNotNull.extend({init:function(a){this.field=a},toQuery:function(){return this.field+"=<>:NULL:"}}),b.exports=f},{"./../../utils":24,"./../abstract/where":10,underscore:"69U/Pa"}],17:[function(a,b){var c=a("./../utils"),d=a("underscore"),e=a("inflection");b.exports=c.Class.extend({_name:null,_originalName:null,_metadata:null,init:function(a,b){throw this._setName(a),this._metadata=b||{},new c.Exceptions.AbstractClassException},getName:function(){return this._name},getPluralizedName:function(){var a=e.underscore(this.getName()).split("_");return 1===a.length?a[0]=e.pluralize(a[0]):a[a.length-1]=e.pluralize(a[a.length-1]),e.camelize(a.join("_"),!0)},getOriginalName:function(){return this._originalName},getMetadata:function(){return this._metadata},_setName:function(a){c.assert("`name` is a required field!",void 0!==a),c.assert("`name` must be a string!",d.isString(a)),this._name=c.normalizeName(a),this._originalName=a}})},{"./../utils":24,inflection:26,underscore:"69U/Pa"}],18:[function(a,b){b.exports={Abstract:a("./abstract"),Schema:a("./schema"),Model:a("./model"),Property:a("./property")}},{"./abstract":17,"./model":19,"./property":20,"./schema":21}],19:[function(a,b){var c=a("./../utils"),d=a("underscore"),e=a("./abstract"),f=a("./property");b.exports=e.extend({_properties:null,init:function(a,b){this._setName(a),this._metadata=b||{},this._properties={}},addProperty:function(a){return c.assert("`property` must be an instance of Schema.Property",a instanceof f),c.assert("Property must not already be defined in the model",void 0===this._properties[a.getName()]),this._properties[a.getName()]=a,this},getProperty:function(a){return this._properties[c.normalizeName(a)]},getProperties:function(){return this._properties},getPrimaryKey:function(){var a=[];for(var b in this._properties)this._properties[b].isPrimaryKey()&&a.push(this._properties[b]);return a},getPropertyNames:function(){var a=[];for(var b in this._properties)a.push(this._properties[b].getName());return a},getPOJO:function(){var a={name:this.getName(),properties:{}};return d.each(this.getProperties(),function(b){a.properties[b.getName()]=b.getPOJO()}),a},translateObjectToOrm:function(a){var b={},c=this;return d.each(a,function(a,d){var e=c.getProperty(d);void 0!==e&&(b[e.getName()]=a)}),b},translateObjectToRepository:function(a){var b={},c=this;return d.each(a,function(a,d){var e=c.getProperty(d);void 0!==e&&(b[e.getOriginalName()]=a)}),b}})},{"./../utils":24,"./abstract":17,"./property":20,underscore:"69U/Pa"}],20:[function(a,b){var c=(a("./../utils"),a("./abstract"));b.exports=c.extend({_primaryKey:!1,_required:!1,_type:"String",init:function(a,b,c){this._setName(a),this._type=b||this._type,this._metadata=c||{}},makePrimaryKey:function(){this._primaryKey=!0},isPrimaryKey:function(){return this._primaryKey},makeRequired:function(){this._required=!0},isRequired:function(){return this._required},getType:function(){return this._type},getPOJO:function(){return{name:this.getName(),type:this.getType(),primaryKey:this.isPrimaryKey(),required:this.isRequired()}}})},{"./../utils":24,"./abstract":17}],21:[function(a,b){var c=a("./../utils"),d=a("underscore"),e=a("./model");b.exports=c.Class.extend({_models:null,init:function(){this._models={}},addModel:function(a){return c.assert("`model` must be an instance of Schema.Model",a instanceof e),c.assert("Model must not already be defined in the schema",void 0===this._models[a.getName()]),this._models[a.getName()]=a,this},getModel:function(a){return this._models[c.normalizeName(a)]},getModels:function(){return this._models},getModelNames:function(){var a=[];return d.each(this._models,function(b){a.push(b.getName())}),a},getPOJO:function(){var a={};return d.each(this.getModels(),function(b){a[b.getName()]=b.getPOJO()}),a}})},{"./../utils":24,"./model":19,underscore:"69U/Pa"}],22:[function(a,b,c){var d=!1,e=/xyz/.test(function(){})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(a){var b=this.prototype;d=!0;var c=new this;d=!1;for(var f in a)c[f]="function"==typeof a[f]&&"function"==typeof b[f]&&e.test(a[f])?function(a,c){return function(){var d=this._super;this._super=b[a];var e=c.apply(this,arguments);return this._super=d,e}}(f,a[f]):a[f];return Class=function(){!d&&this.init&&this.init.apply(this,arguments)},Class.prototype=c,Class.constructor=Class,Class.extend=arguments.callee,Class},"undefined"!=typeof c&&(c.Class=Class)},{}],23:[function(a,b){function c(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}var d=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"An assertion made did not pass!"};c(d,Error),d.prototype.name="AssertionException";var e=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Object did not pass validation!"};c(e,Error),e.prototype.name="ValidationException";var f=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"This class is abstract and cannot be instantiated!"};c(f,Error),f.prototype.name="AbstractClassException";var g=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Deleted object access is not allowed!"};c(g,Error),g.prototype.name="DeletedModelException";var h=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"Model must be saved first!"};c(h,Error),h.prototype.name="UnsavedModelException";var i=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"There was an error instantiating your model!"};c(i,Error),i.prototype.name="ModelInstantiationException";var j=function(a,b){Error.captureStackTrace(this,b||this),this.message=a||"There was an error in the repository!"};c(j,Error),j.prototype.name="RepositoryException",b.exports={AssertionException:d,ValidationException:e,AbstractClassException:f,DeletedModelException:g,UnsavedModelException:h,ModelInstantiationException:i,RepositoryException:j}},{}],24:[function(a,b){var c={},d=a("./exceptions"),e=a("inflection"),f=a("underscore");b.exports=c,c.assert=function(a,b){if(b!==!0)throw new d.AssertionException(a)},c.Class=a("./class").Class,c.Exceptions=d,c.curry=function(a,b){for(var c=[],d=2,e=arguments.length;e>d;d++)c.push(arguments[d]);return function(){for(var d=c.slice(0),e=0,f=arguments.length;f>e;e++)d.push(arguments[e]);return a.apply(b,d)}},c.normalizeName=function(a){c.assert("Name must be a string",f.isString(a));var b,d,g=a.replace(/(\s|\_)+/g," ").trim().split(" ");return 1===g.length?g[0]=e.singularize(g[0]):(d=g.pop(),g.push(e.singularize(d))),b=g.join("_"),e.camelize(e.underscore(b),!0)},c.overrideMethod=function(a,b,c){var d=a[b],e=function(){var f;return void 0!==d?(a[b]=d,f=c.apply(a,arguments),a[b]=e,f):c.apply(a,arguments)};a[b]=e},c.decorateObject=function(a,b){return f.each(b,function(b){f.each(b,function(b,d){c.assert("Decorator method must be a function!",f.isFunction(b)),c.overrideMethod(a,d,b)})}),a},c.instantiateModel=function(a,b,d,e){var f=new b(d,e),g=a.getDecorations();return c.decorateObject(f,g),f}},{"./class":22,"./exceptions":23,inflection:26,underscore:"69U/Pa"}],25:[function(){},{}],26:[function(a,b,c){!function(a){var d=["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],e=[[new RegExp("(m)en$","gi")],[new RegExp("(pe)ople$","gi")],[new RegExp("(child)ren$","gi")],[new RegExp("([ti])a$","gi")],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi")],[new RegExp("(hive)s$","gi")],[new RegExp("(tive)s$","gi")],[new RegExp("(curve)s$","gi")],[new RegExp("([lr])ves$","gi")],[new RegExp("([^fo])ves$","gi")],[new RegExp("([^aeiouy]|qu)ies$","gi")],[new RegExp("(s)eries$","gi")],[new RegExp("(m)ovies$","gi")],[new RegExp("(x|ch|ss|sh)es$","gi")],[new RegExp("([m|l])ice$","gi")],[new RegExp("(bus)es$","gi")],[new RegExp("(o)es$","gi")],[new RegExp("(shoe)s$","gi")],[new RegExp("(cris|ax|test)es$","gi")],[new RegExp("(octop|vir)i$","gi")],[new RegExp("(alias|status)es$","gi")],[new RegExp("^(ox)en","gi")],[new RegExp("(vert|ind)ices$","gi")],[new RegExp("(matr)ices$","gi")],[new RegExp("(quiz)zes$","gi")],[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],f=[[new RegExp("(m)an$","gi")],[new RegExp("(pe)rson$","gi")],[new RegExp("(child)$","gi")],[new RegExp("^(ox)$","gi")],[new RegExp("(ax|test)is$","gi")],[new RegExp("(octop|vir)us$","gi")],[new RegExp("(alias|status)$","gi")],[new RegExp("(bu)s$","gi")],[new RegExp("(buffal|tomat|potat)o$","gi")],[new RegExp("([ti])um$","gi")],[new RegExp("sis$","gi")],[new RegExp("(?:([^f])fe|([lr])f)$","gi")],[new RegExp("(hive)$","gi")],[new RegExp("([^aeiouy]|qu)y$","gi")],[new RegExp("(x|ch|ss|sh)$","gi")],[new RegExp("(matr|vert|ind)ix|ex$","gi")],[new RegExp("([m|l])ouse$","gi")],[new RegExp("(quiz)$","gi")],[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("ss$","gi"),"ss"],[new RegExp("s$","gi"),""]],g=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],h=new RegExp("(_ids|_id)$","g"),i=new RegExp("_","g"),j=new RegExp("[ _]","g"),k=new RegExp("([A-Z])","g"),l=new RegExp("^_"),m={_apply_rules:function(a,b,c,d){if(d)a=d;else{var e=m.indexOf(c,a.toLowerCase())>-1;if(!e)for(var f=0,g=b.length;g>f;f++)if(a.match(b[f][0])){void 0!==b[f][1]&&(a=a.replace(b[f][0],b[f][1]));break}}return a},indexOf:function(a,b,c,d){c||(c=-1);for(var e=-1,f=c,g=a.length;g>f;f++)if(a[f]===b||d&&d(a[f],b)){e=f;break}return e},pluralize:function(a,b){return m._apply_rules(a,e,d,b)},singularize:function(a,b){return m._apply_rules(a,f,d,b)},camelize:function(a,b){for(var c=a.toLowerCase().split("/"),d=0,e=c.length;e>d;d++){for(var f=c[d].split("_"),g=b&&d+1===e?1:0,h=g,i=f.length;i>h;h++)f[h]=f[h].charAt(0).toUpperCase()+f[h].substring(1);c[d]=f.join("")}return c.join("::")},underscore:function(a,b){if(b&&a===a.toUpperCase())return a;for(var c=a.split("::"),d=0,e=c.length;e>d;d++)c[d]=c[d].replace(k,"_$1"),c[d]=c[d].replace(l,"");return c.join("/").toLowerCase()},humanize:function(a,b){return a=a.toLowerCase(),a=a.replace(h,""),a=a.replace(i," "),b||(a=m.capitalize(a)),a},capitalize:function(a){return a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)},dasherize:function(a){return a.replace(j,"-")},titleize:function(a){a=a.toLowerCase().replace(i," ");for(var b=a.split(" "),c=0,d=b.length;d>c;c++){for(var e=b[c].split("-"),f=0,h=e.length;h>f;f++)m.indexOf(g,e[f].toLowerCase())<0&&(e[f]=m.capitalize(e[f]));b[c]=e.join("-")}return a=b.join(" "),a=a.substring(0,1).toUpperCase()+a.substring(1)},demodulize:function(a){var b=a.split("::");return b[b.length-1]},tableize:function(a){return a=m.underscore(a),a=m.pluralize(a)},classify:function(a){return a=m.camelize(a),a=m.singularize(a)},foreign_key:function(a,b){return a=m.demodulize(a),a=m.underscore(a)+(b?"":"_")+"id"},ordinalize:function(a){for(var b=a.split(" "),c=0,d=b.length;d>c;c++){var e=parseInt(b[c],10);if(!isNaN(e)){var f=b[c].substring(b[c].length-2),g=b[c].substring(b[c].length-1),h="th";"11"!=f&&"12"!=f&&"13"!=f&&("1"===g?h="st":"2"===g?h="nd":"3"===g&&(h="rd")),b[c]+=h}}return b.join(" ")},transform:function(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c];this.hasOwnProperty(e)&&(a=this[e](a))}return a}};return"undefined"==typeof c?a.inflection=m:(m.version="1.2.7",void(b.exports=m))}(this)},{}],rsvp:[function(a,b){b.exports=a("psHlfu")},{}],psHlfu:[function(a,b){b.exports=window.RSVP},{}],underscore:[function(a,b){b.exports=a("69U/Pa")},{}],"69U/Pa":[function(a,b){b.exports=window._},{}]},{},[1])(1)});
//# sourceMappingURL=dist/intaglio.min.js.map